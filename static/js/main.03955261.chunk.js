(this["webpackJsonpweather-forcast"]=this["webpackJsonpweather-forcast"]||[]).push([[0],{65:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(10),s=n.n(r),i=n(17),o=n(18),l=n.n(o),u=n(23),d=n(24),j=n.n(d),m=n(14),b=n.n(m),h="position-relative d-flex ",p="flex-row justify-content-between",x="72b9218524d32ec84297f8d1c555ef67",f=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("".concat("https://api.openweathermap.org/data/2.5/weather?q=").concat(t,"&units=metric&appid=").concat(x));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(u.a)(l.a.mark((function e(t,n){var c,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="".concat("https://api.openweathermap.org/data/2.5/onecall/timemachine?units=metric&lat=").concat(t.lat,"&lon=").concat(t.lon,"&dt=").concat(v(n),"&appid=").concat(x),e.next=3,j.a.get(c);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=function(e){return{temp:"".concat(Math.round(e.current.temp),"\xb0C"),main:e.current.weather[0].main,desc:e.current.weather[0].description,icon:"http://openweathermap.org/img/wn/".concat(e.current.weather[0].icon,"@2x.png"),date:"".concat(b.a.unix(e.current.dt).format("ddd D")),key:e.current.dt}},v=function(e){return b()().subtract(e,"days").unix()},y=n(1),w=function(){return Object(y.jsx)("header",{children:Object(y.jsx)("h1",{id:"title",className:"mb-4 fw-bold ",children:Object(y.jsx)("a",{href:"https://github.com/nhope123/weather-forcast",tabIndex:"0",target:"_top",title:"Go to Repository",children:"Weather Forcast"})})})},N=n(12),F=n(25),S=n(75),C=n(76),k=n(21),M=Object(c.createContext)(),T=36e5,_=function(e){var t=Object(c.useState)(""),n=Object(N.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(""),i=Object(N.a)(s,2),o=i[0],l=i[1],u=Object(c.useState)([]),d=Object(N.a)(u,2),j=d[0],m=d[1],h=Object(c.useState)(""),p=Object(N.a)(h,2),x=p[0],v=p[1],w=Object(c.useState)(!0),_=Object(N.a)(w,2),I=_[0],L=_[1],D=Object(k.b)(),q=function(e){j.length<1?m([g(e)]):j.length<4?m([].concat(Object(F.a)(j),[g(e)])):4===j.length&&(m([].concat(Object(F.a)(j),[g(e)]).sort((function(e,t){return e.key-t.key}))),l(""),L(!1))},E=function(e){var t;l(e.coord),v({name:(t=e).name,country:t.sys.country,date:b.a.unix(t.dt).format("ddd, MMM D, h:ssa"),temp:"".concat(Math.round(t.main.temp),"\xb0C"),icon:"http://openweathermap.org/img/wn/".concat(t.weather[0].icon,"@2x.png"),desc:t.weather[0].description,main:t.weather[0].main,sunrise:t.sys.sunrise,sunset:t.sys.sunset,feel:"".concat(Math.round(t.main.feels_like),"\xb0C"),temp_min:"".concat(Math.round(t.main.temp_min),"\xb0C"),temp_max:"".concat(Math.round(t.main.temp_max),"\xb0C")}),m([]),r("")};return Object(S.a)("weather",(function(){return f(a)}),{onSuccess:function(e){return E(e)},onError:function(e){D.error(e.response.data.message),r("")},cacheTime:T,enabled:a.length>0}),Object(C.a)([1,2,3,4,5].map((function(e){var t=1===e?"1st":2===e?"2nd":e+"th";return{queryKey:["day",e],queryFn:function(){return O(o,e)},onSuccess:function(e){return q(e)},onError:function(e){D.error("".concat(t," day: ").concat(e.response.data.message)),r("")},retry:1,cacheTime:T,enabled:"object"===typeof o}}))),Object(y.jsx)(M.Provider,{value:{city:a,setCity:r,coordinates:o,getLocalForcast:E,currentForcast:x,setCurrentForcast:v,previousForcast:j,getForcastHistory:q,isFirstLoad:I,setIsFirstLoad:L},children:e.children})},I=n(70),L="Enter city name",D=function(){var e=Object(c.useState)(""),t=Object(N.a)(e,2),n=t[0],a=t[1],r=Object(c.useContext)(M).setCity;return Object(y.jsx)("div",{className:"position-relative d-block pb-5  px-sm-5 pt-2",role:"search",children:Object(y.jsxs)("form",{onSubmit:function(e){e.preventDefault(),r(n),a("")},"aria-label":"Search city weaather forcast ",children:[Object(y.jsx)("input",{type:"search",tabIndex:"0",value:n,required:!0,"aria-placeholder":L,placeholder:L,onChange:function(e){return a(e.target.value)},"aria-label":"Search for the city"}),Object(y.jsx)("button",{title:"Submit ",type:"submit",tabIndex:"0",disabled:n.length<1,children:Object(y.jsx)(I.a,{})})]})})},q=n(71),E=n(72),R="fs-1",P=function(e){var t=b.a.unix(e.data).format("h:mm a");return Object(y.jsxs)("div",{className:"".concat(h," flex-column align-items-center justify-content-end ").concat(z),title:"".concat("sunrise"===e.time?"Sunrise":"Sunset"," at ").concat(t),children:["sunrise"===e.time?Object(y.jsx)(q.a,{className:"".concat(R," "),style:{color:"#0073e6"}}):Object(y.jsx)(E.a,{className:"".concat(R," "),style:{color:"#ff5e4b"}}),Object(y.jsx)("div",{children:t})]})},z="px-3",B=function(){var e=Object(c.useContext)(M).currentForcast;return Object(y.jsxs)("div",{className:"".concat(h," flex-column justify-content-start align-items-between current-forcast mb-3"),children:[Object(y.jsxs)("div",{role:"region","aria-label":"Address and current date",children:[Object(y.jsx)("h2",{className:"text-center",title:"Forcast location",children:"".concat(e.name,", ").concat(e.country)}),Object(y.jsx)("div",{className:"text-center",title:"Today's date",children:e.date})]}),Object(y.jsxs)("div",{className:"".concat(h," ").concat(p," align-items-center pb-3 px-4"),role:"region","aria-label":"current temperture",children:[Object(y.jsx)("h2",{className:"current-temp m-0 align-middle  fw-bold",title:"current temperature",children:e.temp}),Object(y.jsxs)("div",{className:"".concat(h," flex-column justify-content-center "),title:e.desc,children:[Object(y.jsx)("img",{src:e.icon,alt:e.desc}),Object(y.jsx)("div",{className:"text-center",children:e.main})]})]}),Object(y.jsxs)("div",{className:"".concat(h," ").concat(p," "),role:"region","aria-label":"current weather status",children:[Object(y.jsx)(P,{time:"sunrise",data:e.sunrise,title:"Sunrie"}),Object(y.jsx)(P,{time:"sunset",data:e.sunset,title:"Sunset"}),Object(y.jsxs)("div",{className:"".concat(h," flex-column justify-content-end ").concat(z),title:"Feels like ",children:[Object(y.jsx)("div",{children:"Feels"}),Object(y.jsx)("div",{className:"text-center",children:e.feel})]}),Object(y.jsxs)("div",{className:"".concat(h," flex-row justify-content-center align-items-end ").concat(z),children:[Object(y.jsx)("span",{className:"position-relative d-inline-block min-temp ",title:"min Temperature",children:e.temp_min}),Object(y.jsx)("span",{className:"position-relative d-inline-block fs-2  lh-base division",children:"/"}),Object(y.jsx)("span",{className:"position-relative d-inline-block max-temp",title:"max Temperature",children:e.temp_max})]})]})]})},J=function(e){var t=Object(c.useContext)(M).previousForcast;return Object(y.jsx)(y.Fragment,{children:t.length>=5&&Object(y.jsxs)("div",{className:"".concat(h," flex-column justify-content-center align-items-center my-2 "),title:"".concat(e.date," weather forcast"),children:[Object(y.jsx)("h3",{id:"forcast-date",children:e.date}),Object(y.jsx)("div",{children:e.temp}),Object(y.jsx)("div",{className:"".concat(h," flex-column justify-content-center align-items-center "),title:e.desc,children:Object(y.jsx)("img",{src:e.icon,className:"w-50 ",alt:e.desc})})]})})},W=function(){var e=Object(c.useContext)(M),t=e.previousForcast,n=e.isFirstLoad;return Object(y.jsx)(y.Fragment,{children:5===t.length?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(B,{}),Object(y.jsx)("div",{className:"".concat(h," flex-row flex-wrap justify-content-center align-items-center "),role:"region","aria-label":"5 day forcast history",children:t.map((function(e){return Object(y.jsx)(J,Object(i.a)({},e),e.key)}))})]}):Object(y.jsx)("div",{className:"welcome",role:"alert","aria-labelledby":"stand in",children:Object(y.jsx)("h2",{id:"stand in",children:"".concat(n?"Welcome":"Loading.........")})})})},A=n(74),G=n(20),H=n(36),K=new A.a,Q=function(e){return Object(y.jsxs)(G.a,{client:K,children:[Object(y.jsx)(H.ReactQueryDevtools,{initialIsOpen:!1}),e.children]})},U=n(73),V=function(e){e.style,e.options;var t=e.message;e.close;return Object(y.jsxs)("div",{className:".alert",style:{backgroundColor:"rgba(255,255,255,0.4)",borderRadius:"10px",padding:"8px 12px",marginTop:"10px"},children:[Object(y.jsx)(U.a,{style:{color:"red",fontSize:"1.5rem",marginRight:"10px"}}),Object(y.jsx)("span",{style:{color:"black",fontSize:"1.3rem"},children:t})]})},X={offset:"15px",position:"top center",timeout:4e3,transition:"fade"},Y=function(){return Object(y.jsx)(k.a,Object(i.a)(Object(i.a)({template:V},X),{},{children:Object(y.jsx)(Q,{children:Object(y.jsx)(_,{children:Object(y.jsxs)("div",{className:"".concat(h," flex-column justify-content-start align-items-center py-5 px-3 bg-purple vw-100 min-vh-100 "),role:"main","aria-labelledby":"title",children:[Object(y.jsx)(w,{}),Object(y.jsx)(D,{}),Object(y.jsx)(W,{})]})})})}))},Z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,77)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))};n(64),n(65);s.a.render(Object(y.jsx)(a.a.StrictMode,{children:Object(y.jsx)(Y,{})}),document.getElementById("root")),Z()}},[[66,1,2]]]);
//# sourceMappingURL=main.03955261.chunk.js.map